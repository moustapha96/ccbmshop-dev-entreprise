import{c as F,G as te,u as se,j as t,M as P,A as ae,f as I,t as k,l as R,E as ne,B as d,I as re,J as N}from"./index.e21229d2.js";import{u as oe,r as p}from"./vendor.af94f9e3.js";import{P as ie}from"./paimentService.4fc70a9c.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=F("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=F("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);class de{constructor(){this.baseUrl="https://orbitcity.odoo.com/",this.apiToken=null,this.tokenExpiry=null,this.partnerId=null,this.sessionId=null}async authenticate(s,n,e="odoo"){try{const a=await fetch(`${this.baseUrl}web/session/authenticate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"call",params:{db:e,login:s,password:n}})});if(!a.ok)throw new Error(`Échec de l'authentification Odoo: ${a.status}`);const r=await a.json();if(r.error)throw new Error(`Erreur d'authentification: ${r.error.message}`);if(r.result&&r.result.uid)return this.sessionId=a.headers.get("set-cookie"),this.partnerId=r.result.partner_id,this.tokenExpiry=Date.now()+8*60*60*1e3,console.log("Authentification Odoo réussie"),{success:!0,userId:r.result.uid,partnerId:this.partnerId,sessionId:this.sessionId};throw new Error("Authentification échouée")}catch(a){throw console.error("Erreur d'authentification Odoo:",a),a}}async authenticateWithToken(s){return this.apiToken=s,this.tokenExpiry=Date.now()+24*60*60*1e3,s}async ensureValidSession(){if(!this.sessionId||!this.tokenExpiry||Date.now()>=this.tokenExpiry)throw new Error("Session expirée, veuillez vous reconnecter");return!0}async getOrangeToken(){await this.ensureValidSession();try{const s=await fetch(`${this.baseUrl}api/orange_money/token`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0},body:JSON.stringify({})});if(!s.ok)throw new Error(`Échec de l'obtention du token Orange Money: ${s.status}`);const n=await s.json();if(!n.success)throw new Error(n.error||"Erreur lors de l'obtention du token");return n.data}catch(s){throw console.error("Erreur obtention token Orange Money:",s),s}}async generateQRCode(s,n,e="123456",a="CCBM_SHOP",r=300,l=null,h){try{const u={amount:s,description:n,merchant_code:e,business_name:a,validity:r,partner_id:h,order_id:l};console.log("Génération QR Code via Odoo avec body:",u);const _=await fetch(`${this.baseUrl}api/orange_money/qrcode/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0},body:JSON.stringify(u)});if(!_.ok){const i=await _.text();throw console.error("Erreur API Odoo:",i),new Error(`Échec de la génération du QR Code: ${_.status} - ${i}`)}const f=await _.json();if(!f.success)throw new Error(f.error||"Erreur lors de la génération du QR Code");return console.log("Réponse API Odoo:",f.data),{qrCode:f.data.qr_code,transactionId:f.data.transaction_id,odooTransactionId:f.data.odoo_transaction_id,reference:f.data.reference,status:"PENDING",amount:f.data.amount,validity:f.data.validity,deeplinks:f.data.deeplinks||{}}}catch(u){throw console.error("Erreur génération QR Code via Odoo:",u),u}}async createTransaction(s,n="",e="pending",a=null,r=null){if(await this.ensureValidSession(),!this.partnerId)throw new Error("Partner ID manquant, veuillez vous authentifier");try{const l={amount:s,phone:n,status:e,reference:a||`REF-${Date.now()}`,partner_id:this.partnerId,order_id:r},h=await fetch(`${this.baseUrl}api/orange_money/transaction/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0},body:JSON.stringify(l)});if(!h.ok)throw new Error(`Échec de la création de transaction: ${h.status}`);const u=await h.json();if(!u.success)throw new Error(u.error||"Erreur lors de la création de la transaction");return u.data}catch(l){throw console.error("Erreur création transaction:",l),l}}async updateTransaction(s,n){await this.ensureValidSession();try{const e=await fetch(`${this.baseUrl}api/orange_money/transaction/update/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0},body:JSON.stringify(n)});if(!e.ok)throw new Error(`Échec de la mise à jour de transaction: ${e.status}`);const a=await e.json();if(!a.success)throw new Error(a.error||"Erreur lors de la mise à jour de la transaction");return a.data}catch(e){throw console.error("Erreur mise à jour transaction:",e),e}}async getPartnerTransactions(s=20,n=0,e=null,a=null,r=null){if(await this.ensureValidSession(),!this.partnerId)throw new Error("Partner ID manquant, veuillez vous authentifier");try{let l=`${this.baseUrl}api/orange_money/transactions/${this.partnerId}?limit=${s}&offset=${n}`;e&&(l+=`&status=${e}`),a&&(l+=`&date_from=${a}`),r&&(l+=`&date_to=${r}`);const h=await fetch(l,{method:"GET",headers:{Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0}});if(!h.ok)throw new Error(`Échec de la récupération des transactions: ${h.status}`);const u=await h.json();if(!u.success)throw new Error(u.error||"Erreur lors de la récupération des transactions");return u.data}catch(l){throw console.error("Erreur récupération transactions:",l),l}}async getTransaction(s){await this.ensureValidSession();try{const n=await fetch(`${this.baseUrl}api/orange_money/transaction/${s}`,{method:"GET",headers:{Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0}});if(!n.ok)throw new Error(`Échec de la récupération de la transaction: ${n.status}`);const e=await n.json();if(!e.success)throw new Error(e.error||"Erreur lors de la récupération de la transaction");return e.data}catch(n){throw console.error("Erreur récupération transaction:",n),n}}async checkTransactionStatus(s){await this.ensureValidSession();try{console.log("Vérification du statut de la transaction via Odoo:",s);const n=await fetch(`${this.baseUrl}api/orange_money/transaction/status/${s}`,{method:"GET",headers:{Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0}});if(console.log("Réponse API Odoo pour le statut:",n.status),!n.ok)throw new Error(`Échec de la vérification du statut: ${n.status}`);const e=await n.json();if(!e.success)throw new Error(e.error||"Erreur lors de la vérification du statut");return console.log("Réponse statut transaction via Odoo:",e.data),{status:e.data.mapped_status,rawStatus:e.data.orange_status,transactionId:e.data.transaction_id,updatedLocally:e.data.updated_locally}}catch(n){throw console.error("Erreur vérification statut via Odoo:",n),n}}async getPartnerStats(){if(await this.ensureValidSession(),!this.partnerId)throw new Error("Partner ID manquant, veuillez vous authentifier");try{const s=await fetch(`${this.baseUrl}api/orange_money/stats/${this.partnerId}`,{method:"GET",headers:{Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0}});if(!s.ok)throw new Error(`Échec de la récupération des statistiques: ${s.status}`);const n=await s.json();if(!n.success)throw new Error(n.error||"Erreur lors de la récupération des statistiques");return n.data}catch(s){throw console.error("Erreur récupération statistiques:",s),s}}async getConfig(){try{const s=await fetch(`${this.baseUrl}api/orange_money/config`,{method:"GET",headers:{Authorization:this.apiToken?`Bearer ${this.apiToken}`:void 0,Cookie:this.sessionId||void 0}});if(!s.ok)throw new Error(`Échec de la récupération de la configuration: ${s.status}`);const n=await s.json();if(!n.success)throw new Error(n.error||"Erreur lors de la récupération de la configuration");return n.data}catch(s){throw console.error("Erreur récupération configuration:",s),s}}mapOrangeStatus(s){return{PENDING:"pending",ACCEPTED:"accepted",SUCCESSFUL:"completed",SUCCESS:"completed",FAILED:"failed",EXPIRED:"expired",CANCELLED:"cancelled",REJECTED:"rejected"}[s]||"unknown"}async monitorTransaction(s,n=10,e=5e3){console.log(`Surveillance de la transaction ${s} via Odoo...`);for(let a=1;a<=n;a++)try{const r=await this.checkTransactionStatus(s);if(console.log(`Tentative ${a}${n} - Statut: ${r.rawStatus}`),["SUCCESSFUL","SUCCESS","FAILED","EXPIRED","CANCELLED","REJECTED"].includes(r.rawStatus))return console.log(`Transaction terminée avec le statut: ${r.rawStatus}`),r;a<n&&(console.log(`Attente de ${e}ms avant la prochaine vérification...`),await new Promise(h=>setTimeout(h,e)))}catch(r){if(console.error(`Erreur lors de la tentative ${a}:`,r),a===n)throw r;await new Promise(l=>setTimeout(l,e))}throw new Error(`Timeout: La transaction ${s} n'a pas abouti après ${n} tentatives`)}openQRCode(s,n){if(!s){console.error("Aucune donnée QR Code à ouvrir");return}try{if(s.startsWith("http")){window.open(s,"_blank","width=400,height=400");return}if(s.startsWith("data:image")){const e=window.open("","_blank","width=400,height=400");e&&(e.document.write(`
                          <html>
                              <head><title>QR Code Orange Money</title></head>
                              <body style="margin:0;padding:20px;text-align:center;font-family:Arial,sans-serif;">
                                  <h3>QR Code Orange Money</h3>
                                  <img src="${s}" alt="QR Code" style="max-width:100%;height:auto;border:2px solid #ff6600;border-radius:8px;">
                                  <p style="margin-top:15px;color:#666;">Référence: ${n}</p>
                                  <button onclick="window.print()" style="margin-top:10px;padding:8px 16px;background:#ff6600;color:white;border:none;border-radius:4px;cursor:pointer;">Imprimer</button>
                              </body>
                          </html>
                      `),e.document.close());return}console.warn("Format de QR Code non reconnu:",s.substring(0,50))}catch(e){console.error("Erreur lors de l'ouverture du QR Code:",e)}}async logout(){try{this.sessionId&&await fetch(`${this.baseUrl}web/session/destroy`,{method:"POST",headers:{"Content-Type":"application/json",Cookie:this.sessionId}})}catch(s){console.error("Erreur lors de la déconnexion:",s)}finally{this.sessionId=null,this.apiToken=null,this.partnerId=null,this.tokenExpiry=null}}}const S=new de,ue="/assets/orange.ac650953.png",D="/assets/wave.799f7a3d.png",me=({handlePay:U,totalAmount:s,onClose:n,order:e,idOrder:a})=>{localStorage.setItem("idOrderPayment",null),localStorage.setItem("montant",null),localStorage.setItem("tokenOrderPayment",null),localStorage.setItem("statusOrderPayment",null),console.log("arrivé");const r=oe(),{payment:l,setUserPayment:h,setOrder:u,setPaymentDetails:_,setTotalAmount:f}=p.useContext(te),{user:i}=se(),[x,w]=p.useState(!1),[V,T]=p.useState(!0),[m,M]=p.useState(""),[j,q]=p.useState(""),[B,X]=p.useState(!1),[L,W]=p.useState(""),[v,Q]=p.useState("");p.useState("");const[$,O]=p.useState(null),[E,A]=p.useState(null);p.useEffect(()=>{h(i),u(e),console.log("order "+a),console.log("montant "+s),console.log("user",i)},[]);const G=()=>{let o=null;return e.type_sale==="order"?e.payment_mode=="echelonne"?o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-${new Date().getTime().toString()}`:o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}`:e.type_sale==="preorder"?!e.first_payment_state&&!e.second_payment_state&&!e.third_payment_state?o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-1`:e.first_payment_state&&!e.second_payment_state&&!e.third_payment_state?o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-2`:o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-3`:e.type_sale==="creditorder"?!e.first_payment_state&&!e.second_payment_state&&!e.third_payment_state&&!e.fourth_payment_state?o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-1`:e.first_payment_state&&!e.second_payment_state&&!e.third_payment_state&&!e.fourth_payment_state?o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-2`:e.first_payment_state&&e.second_payment_state&&e.third_payment_state&&!e.fourth_payment_state?o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-3`:o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}-4`:o=`${i.id}-${a}-${s}-${e.name}-${e.type_sale}`,o},J=async o=>{if(o.preventDefault(),!m){d.error("Veuillez sélectionner une méthode de paiement",{position:"top-center",autoClose:3e3});return}if(m==="wave"&&!j){d.error("Veuillez entrer votre numéro de téléphone Wave",{position:"top-center",autoClose:3e3});return}w(!0);const g=G();try{re(a,s,e.order_lines.map(y=>({name:y.product_name,price:y.price_unit,quantity:y.product_uom_qty})));const b=`REF-${e.name}-${Math.floor(Math.random()*1e6)}`;W(b);let c;if(m==="wave"){let y=null;e.type_sale==="preorder"?y=window.location.origin+`/pre-commandes/${a}/détails`:e.type_sale==="creditorder"?y=window.location.origin+`/credit-commandes/${a}/détails`:y=window.location.origin+`/commandes/${a}/détails`;let z={amount:s,phoneNumber:j,description:`Paiement de ${s} FCFA pour la commande ${e.name}`,reference:b,transaction_id:g,partner_id:i?i.id:null,order_id:a,success_url:window.location.origin+"/wave-paiement"};if(console.log(z),c=await N.initiateDirectPayment(z),console.log(c),c.status==="pending"&&c.success?(Q(c.transaction_id||c.session_id),c.payment_url?window.open(c.payment_url,"_blank"):d.warning("Aucun lien de paiement trouvé",{position:"top-center",autoClose:3e3})):c.status==="cancelled"?(d.warning("Paiement annulé",{position:"top-center",autoClose:3e3}),e.type_sale==="preorder"?r(`/pre-commandes/${a}/détails`):e.type_sale==="creditorder"?r(`/credit-commandes/${a}/détails`):r(`/commandes/${a}/détails`)):c.status==="failed"&&(d.warning("Paiement echoué",{position:"top-center",autoClose:3e3}),e.type_sale==="preorder"?r(`/pre-commandes/${a}/détails`):e.type_sale==="creditorder"?r(`/credit-commandes/${a}/détails`):r(`/commandes/${a}/détails`)),c.status==="pending"&&c.success){const C=await N.checkTransactionStatus(c.transaction_id);console.log(C),C.status==="success"&&C.checkout_status==="complete"&&C.payment_status==="succeeded"&&(d.success("Paiement effectué avec succès",{position:"top-center",autoClose:3e3}),e.type_sale==="preorder"?r(`/pre-commandes/${a}/détails`):e.type_sale==="creditorder"?r(`/credit-commandes/${a}/détails`):r(`/commandes/${a}/détails`))}}else{const y={amount:s,partnerId:i.id,description:`Paiement de ${s} FCFA pour la commande ${e.name}`,merchantCode:"123456",businessName:"CCBM SHOP",validity:300};console.log(y),c=await S.generateQRCode(s,`Paiement de ${s} FCFA pour la commande ${e.name}`,"123456","CCBM SHOP",300,a,i.id),O(c.qrCode),A(c),Q(c.transactionId),console.log("QR Code généré:",c)}X(!0),m==="wave"?d.success("Demande de paiement effectif pour Wave",{position:"top-center",autoClose:5e3}):d.success("QR Code Orange Money généré avec succès. Vous pouvez maintenant le scanner.",{position:"top-center",autoClose:5e3})}catch(b){console.error("Erreur lors du paiement:",b),d.error(`Erreur lors du paiement: ${b.message}`,{position:"top-center",autoClose:5e3})}finally{w(!1)}},H=async()=>{w(!0);try{let o;if(m==="wave"&&(o=await N.checkTransactionStatus(v),o.status==="pending"&&o.success)){const g=await N.checkTransactionStatus(o.transaction_id);console.log(g),g.status==="success"&&g.checkout_status==="complete"&&g.payment_status==="succeeded"&&(d.success("Paiement effectué avec succès",{position:"top-center",autoClose:3e3}),e.type_sale==="preorder"?r(`/pre-commandes/${a}/détails`):e.type_sale==="creditorder"?r(`/credit-commandes/${a}/détails`):r(`/commandes/${a}/détails`))}o.status==="completed"?(d.success("Paiement confirmé avec succès!",{position:"top-center",autoClose:3e3}),e.type_sale==="preorder"?r(`/pre-commandes/${a}/détails`):e.type_sale==="creditorder"?r(`/credit-commandes/${a}/détails`):r(`/commandes/${a}/détails`),T(!1)):d.warning("Le paiement est toujours en attente. Veuillez vérifier et confirmer le paiement.",{position:"top-center",autoClose:5e3})}catch(o){console.error("Erreur lors de la vérification du paiement:",o),d.error(`Erreur lors de la vérification: ${o.message}`,{position:"top-center",autoClose:5e3})}finally{w(!1)}},K=()=>{T(!1),n()},Y=()=>{if($){const o=document.createElement("a");o.href=$,o.download=`qr-code-orange-money-${v}.png`,o.click()}},Z=()=>{$&&S&&S.openQRCode($,v)},ee=async()=>{if(m==="orange"&&v)try{w(!0),d.info("Surveillance automatique du paiement démarrée...",{position:"top-center",autoClose:3e3}),(await S.monitorTransaction(v,10,3e4)).status==="completed"&&(await ie.updatePaymentDetails(localStorage.getItem("idDataPayment"),"completed","",i.name,i.email,j,"completed"),d.success("Paiement confirmé automatiquement!",{position:"top-center",autoClose:3e3}),setTimeout(()=>{e.type_sale==="preorder"?r(`/pre-commandes/${a}/détails`):e.type_sale==="creditorder"?r(`/credit-commandes/${a}/détails`):r(`/commandes/${a}/détails`),T(!1)},2e3))}catch(o){console.error("Erreur lors de la surveillance:",o),d.warning("Surveillance automatique échouée. Veuillez vérifier manuellement.",{position:"top-center",autoClose:5e3})}finally{w(!1)}};return t.jsxs(P,{size:"xl",className:"h-auto",show:V,popup:!0,onClose:n,children:[t.jsx(P.Header,{}),t.jsx(P.Body,{children:t.jsx("div",{className:"fixed inset-0 p-4 flex flex-wrap justify-center items-center w-full h-full z-[1000] before:fixed before:inset-0 before:w-full before:h-full before:bg-[rgba(0,0,0,0.5)] overflow-auto font-[sans-serif]",children:t.jsxs("div",{className:"w-full max-w-lg bg-white shadow-lg rounded-lg p-8 relative",children:[t.jsxs("div",{className:"flex items-start border-b border-gray-300 pb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"text-gray-800 text-xl font-bold",children:["Paiement"," ",e.type_sale=="order"?"Commande":e.type_sale=="preorder"?"Pré Commande":"Commande à crédit"," "]}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Résumé détaillé de votre commande."})]}),t.jsx("p",{children:t.jsx(ae,{onClick:K,className:"cursor-pointer hover:text-red-500 hover:scale-150 duration-300"})})]}),e&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"my-8",children:[t.jsx("table",{className:"w-full",children:t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left text-gray-800 text-sm py-2",children:"Nom de la commande :"}),t.jsx("th",{className:"text-right text-gray-800 text-sm py-2",children:e.name})]})})}),t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left text-gray-800 text-sm py-2",children:"Nom produit"}),t.jsx("th",{className:"text-right text-gray-800 text-sm py-2",children:"Prix total"})]})}),t.jsx("tbody",{children:e&&e.order_lines.map((o,g)=>t.jsxs("tr",{children:[t.jsxs("td",{className:"text-left text-gray-800 text-sm py-2",children:[o.product_name," (",o.product_uom_qty,")"," "]}),t.jsx("td",{className:"text-right text-gray-800 text-sm py-2 font-medium",children:I(o.price_total)})]},g))})]}),t.jsx("table",{className:"w-full",children:t.jsxs("thead",{children:[t.jsxs("tr",{children:[t.jsx("th",{className:"text-left text-gray-800 text-sm py-2",children:"Total Commande (en FCFA) :"}),t.jsx("th",{className:"text-right text-gray-800 text-sm py-2",children:I(Math.ceil(e.amount_total))})]}),e.payment_mode=="echelonne"&&t.jsxs("tr",{children:[t.jsx("th",{className:"text-left text-gray-800 text-sm py-2",children:"Total à payer (en FCFA) :"}),t.jsx("th",{className:"text-right text-gray-800 text-sm py-2",children:I(Math.ceil(s))})]})]})}),B?t.jsxs("div",{className:"mt-6",children:[m==="orange"&&$&&t.jsxs("div",{className:"mb-6 text-center",children:[t.jsx("h4",{className:"text-orange-800 font-medium mb-4",children:"QR Code Orange Money généré"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("img",{src:"/images/orange-money-logo.png",alt:"Orange Money",className:"h-10 w-auto"})}),t.jsx("div",{className:"bg-white p-4 rounded-lg inline-block mb-4 border-2 border-orange-200",children:t.jsx("img",{src:$||"/placeholder.svg",alt:"QR Code Orange Money",className:"max-w-full h-auto max-h-64"})}),t.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[t.jsxs(k,{onClick:Z,className:"w-full bg-orange-500 hover:bg-orange-600",children:[t.jsx(ne,{className:"mr-2 h-4 w-4"}),"Ouvrir le QR Code"]}),t.jsxs(k,{onClick:Y,variant:"outline",className:"w-full",children:[t.jsx(le,{className:"mr-2 h-4 w-4"}),"Télécharger le QR Code"]}),t.jsx(k,{onClick:ee,className:"w-full bg-green-500 hover:bg-green-600",disabled:x,children:x?t.jsxs(t.Fragment,{children:[t.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),"Surveillance..."]}):"Surveillance automatique"})]}),t.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[t.jsxs("p",{children:["Référence: ",t.jsx("span",{className:"font-medium",children:v})]}),(E==null?void 0:E.validity)&&t.jsxs("p",{children:["Validité: ",t.jsxs("span",{className:"font-medium",children:[E.validity," secondes"]})]})]})]}),m==="wave"&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("img",{src:D,alt:"Wave",className:"h-20 w-20"})}),t.jsx("h4",{className:"text-blue-800 font-medium mb-2",children:"Paiement Wave en attente"}),t.jsx("p",{className:"text-blue-700 text-sm",children:"Veuillez vérifier et confirmer le paiement."}),t.jsxs("p",{className:"text-blue-700 text-sm mt-2",children:["Référence: ",t.jsx("span",{className:"font-medium",children:L})]})]}),t.jsx("div",{className:"flex max-sm:flex-col items-center gap-4",children:t.jsx(k,{onClick:H,disabled:x,pill:!0,className:"rounded-lg px-5 py-2.5 font-medium w-full bg-green-600 hover:bg-green-700 text-white text-xl",children:x?t.jsxs(t.Fragment,{children:[t.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),t.jsx("p",{children:"Vérification..."})]}):"Vérifier le paiement"})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mt-6 mb-4",children:[t.jsx("h4",{className:"text-gray-800 font-medium mb-3",children:"Choisissez votre méthode de paiement"}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("div",{className:`flex-1 border rounded-lg p-4 cursor-pointer transition-all ${m==="wave"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-300"}`,onClick:()=>{M("wave")},children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("img",{src:D,alt:"Wave",className:"h-12 w-auto mb-2"}),t.jsx("p",{className:"text-center font-medium",children:"Wave"})]})}),t.jsx("div",{className:`flex-1 border rounded-lg p-4 cursor-pointer transition-all ${m==="orange"?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-300"}`,onClick:()=>M("orange"),children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("img",{src:ue,alt:"Orange Money",className:"h-12 w-auto mb-2"}),t.jsx("p",{className:"text-center font-medium",children:"Orange Money"})]})})]})]}),m==="wave"&&t.jsxs("div",{className:"mt-4 mb-6",children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de téléphone Wave"}),t.jsx("input",{type:"tel",id:"phone",value:j,onChange:o=>q(o.target.value),placeholder:"77 123 45 67",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Entrez votre numéro Wave (format: 77XXXXXXX ou 78XXXXXXX)"})]}),m==="orange"&&t.jsx("div",{className:"mt-4 mb-4",children:t.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[t.jsx("div",{className:"flex items-center justify-center mb-2",children:t.jsx(ce,{className:"h-6 w-6 text-orange-600"})}),t.jsx("p",{className:"text-center text-sm text-orange-700",children:"Un QR Code sera généré pour votre paiement Orange Money"})]})}),t.jsx("div",{className:"flex max-sm:flex-col items-center gap-4 mt-8",children:t.jsx(k,{onClick:J,disabled:x||!m||m==="wave"&&!j,pill:!0,className:"rounded-lg px-5 py-2.5 font-medium w-full hover:bg-red-500 hover:text-white text-xl",children:x?t.jsxs(t.Fragment,{children:[t.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),t.jsx("p",{children:"Traitement en cours..."})]}):"Payer maintenant"})})]})]})})]})})})]})},ye=me;export{ye as W};
