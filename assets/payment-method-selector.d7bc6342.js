import{c as A,G as I,I as T,J as Ne,u as Ce,B as v,K as ke,f as X,j as e,M as U,A as Pe,D as oe,t as Q,l as G,O as Se}from"./index.9afb2c41.js";import{r as s,u as Me}from"./vendor.af94f9e3.js";import{P as _e}from"./PaydunyaModalService.9ed71531.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=A("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=A("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=A("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Ie=()=>{const[N,n]=s.useState(!1),[C,l]=s.useState(null),[d,m]=s.useState(null),$=s.useCallback(async(x,r,o,P,S=null,M=null,j)=>{n(!0),l(null);try{const h=await I.initiatePayment(x,r,o,P,S,M,j);return m(h),h}catch(h){throw l(h.message),h}finally{n(!1)}},[]),E=s.useCallback(async x=>{console.log(x),n(!0),l(null);try{const r=await I.checkTransactionStatus(x);return console.log(r),m(r),r}catch(r){throw l(r.message),r}finally{n(!1)}},[]),k=s.useCallback(async(x,r,o,P=null,S=null,M=null)=>{n(!0),l(null);try{const j=await I.createPaymentLink(x,r,o,P,S,M);return m(j),j}catch(j){throw l(j.message),j}finally{n(!1)}},[]),q=s.useCallback(async x=>{try{return await I.validatePhoneNumber(x)}catch(r){return l(r.message),{valid:!1,message:r.message}}},[]),D=s.useCallback(async x=>{n(!0),l(null);try{return await I.getTransactionPartner(x)}catch(r){throw l(r.message),r}finally{n(!1)}},[]),F=s.useCallback(x=>{I.openQRCode(x)},[]),R=s.useCallback(async x=>{n(!0),l(null);try{return await I.downloadInvoice(x)}catch(r){throw l(r.message),r}finally{n(!1)}},[]);return{loading:N,error:C,transaction:d,initiatePayment:$,checkStatus:E,createPaymentLink:k,validatePhone:q,getPartnerTransactions:D,openQRCode:F,downloadInvoice:R,clearError:()=>l(null),clearTransaction:()=>m(null)}},qe=()=>{const[N,n]=s.useState(!1),[C,l]=s.useState(null),[d,m]=s.useState(null),$=s.useCallback(async r=>{n(!0),l(null);try{const o=await T.initiateDirectPayment(r);return m(o),o}catch(o){throw l(o.message),o}finally{n(!1)}},[]),E=s.useCallback(async(r,o,P,S,M=null,j=null)=>{n(!0),l(null);try{const h=await T.initiateDirectPayment(r,o,P,S,M,j);return m(h),h}catch(h){throw l(h.message),h}finally{n(!1)}},[]),k=s.useCallback(async r=>{n(!0),l(null),console.log(r);try{const o=await T.checkTransactionStatus(r);return m(o),o}catch(o){throw l(o.message),o}finally{n(!1)}},[]),q=s.useCallback(async(r,o,P,S=null,M=null,j=null)=>{n(!0),l(null);try{const h=await T.createPaymentLink(r,o,P,S,M,j);return m(h),h}catch(h){throw l(h.message),h}finally{n(!1)}},[]),D=s.useCallback(async r=>{try{return await T.validatePhoneNumber(r)}catch(o){return l(o.message),{valid:!1,message:o.message}}},[]),F=s.useCallback(async r=>{n(!0),l(null);try{return await T.getTransactionPartner(r)}catch(o){throw l(o.message),o}finally{n(!1)}},[]),R=s.useCallback(r=>{T.openCheckout(r)},[]),x=s.useCallback(async r=>{n(!0),l(null);try{return await T.downloadInvoice(r)}catch(o){throw l(o.message),o}finally{n(!1)}},[]);return{loading:N,error:C,transaction:d,initiatePayment:E,initiateDirectPayment:$,checkStatus:k,createPaymentLink:q,validatePhone:D,getPartnerTransactions:F,openCheckout:R,downloadInvoice:x,clearError:()=>l(null),clearTransaction:()=>m(null)}},ce="/assets/orange.ac650953.png",ie="/assets/wave.799f7a3d.png",Re=({handlePay:N,totalAmount:n,onClose:C,order:l,idOrder:d})=>{const m=Me(),{setUserPayment:$,setOrder:E}=s.useContext(Ne),{user:k}=Ce(),[q,D]=s.useState(),{loading:F,error:R,transaction:x,initiatePayment:r,checkStatus:o,validatePhone:P,openQRCode:S,downloadInvoice:M,clearError:j}=Ie(),{loading:h,error:Y,transaction:Xe,initiateWavePayment:ue,checkStatus:Z,validatePhone:O,clearError:z,initiateDirectPayment:de}=qe(),[me,J]=s.useState(!0),[c,ee]=s.useState(""),[p,ae]=s.useState(""),[he,ge]=s.useState(!1),[xe,pe]=s.useState(""),[i,te]=s.useState(null),[se,V]=s.useState(!1),[w,H]=s.useState({valid:!1,message:""}),L=F||h,b=s.useMemo(()=>k,[k]),a=s.useMemo(()=>l,[l]);s.useEffect(()=>{localStorage.removeItem("idOrderPayment"),localStorage.removeItem("montant"),localStorage.removeItem("tokenOrderPayment"),localStorage.removeItem("statusOrderPayment"),console.log("Order ID:",d),console.log("Amount:",n),console.log("User:",b),b&&$&&$(b),a&&E&&E(a)},[]);const ne=s.useCallback(async(t,g)=>{if(!t||!g)return H({valid:!1,message:""}),{valid:!1,message:""};try{let u;if(g==="wave")u=await O(t);else if(g==="orange")u=await P(t);else{const y=/^(\+221)?(77|78|76|75|70)\d{7}$/;u={valid:y.test(t),message:y.test(t)?"Numéro valide":"Format de numéro invalide"}}return H(u),u}catch(u){console.error("Erreur validation numéro:",u);const y={valid:!1,message:"Erreur de validation"};return H(y),y}},[O,P]);s.useEffect(()=>{if(!p||!c){H({valid:!1,message:""});return}const t=setTimeout(()=>{ne(p,c)},500);return()=>clearTimeout(t)},[p,c,ne]);const re=s.useCallback(()=>{const t=new Date().getTime(),g=Math.floor(Math.random()*1e3);let u=`${b==null?void 0:b.id}-${d}-${n}-${a==null?void 0:a.name}-${a==null?void 0:a.type_sale}`;if((a==null?void 0:a.type_sale)==="order"&&(a==null?void 0:a.payment_mode)==="echelonne")u+=`-${t}`;else if((a==null?void 0:a.type_sale)==="preorder"){const y=ye(a);u+=`-${y}`}else if((a==null?void 0:a.type_sale)==="creditorder"){const y=fe(a);u+=`-${y}`}return`${u}-${g}`},[b==null?void 0:b.id,d,n,a==null?void 0:a.name,a==null?void 0:a.type_sale,a==null?void 0:a.payment_mode]),ye=s.useCallback(t=>t!=null&&t.first_payment_state?t!=null&&t.second_payment_state?"3":"2":"1",[]),fe=s.useCallback(t=>t!=null&&t.first_payment_state?t!=null&&t.second_payment_state?t!=null&&t.third_payment_state?"4":"3":"2":"1",[]),K=s.useCallback(()=>{switch(window.onload=()=>{console.log("Page chargée")},a==null?void 0:a.type_sale){case"preorder":return m(`/pre-commandes/${d}/détails`);case"creditorder":return m(`/credit-commandes/${d}/détails`);default:return m(`/commandes/${d}/détails`)}},[a==null?void 0:a.type_sale,m,d]),ve=s.useCallback(async t=>{var g;if(t.preventDefault(),!c){v.error("Veuillez sélectionner une méthode de paiement",{position:"top-center",autoClose:3e3});return}if((c==="wave"||c==="orange")&&!p){v.error(`Veuillez entrer votre numéro de téléphone ${c==="wave"?"Wave":"Orange Money"}`,{position:"top-center",autoClose:3e3});return}if(p&&!w.valid){v.error(`Numéro invalide: ${w.message}`,{position:"top-center",autoClose:3e3});return}try{j(),z(),ke(d,n,((g=a==null?void 0:a.order_lines)==null?void 0:g.map(B=>({name:B.product_name,price:B.price_unit,quantity:B.product_uom_qty})))||[]);const u=re(),y=`REF-${a==null?void 0:a.name}-${Date.now()}`;pe(y);const _=`Paiement de ${X(n)} pour la commande ${a==null?void 0:a.name}`;let f,W;if(l.type_sale==="preorder"?W=window.location.origin+`/pre-commandes/${d}/détails`:l.type_sale==="creditorder"?W=window.location.origin+`/credit-commandes/${d}/détails`:W=window.location.origin+`/commandes/${d}/détails`,console.log(W),c==="wave"){const B={amount:n,phoneNumber:p,description:`Paiement de ${n} pour la commande ${l.name}`,reference:`REF-${l.name}-${Date.now()}`,order_id:d,partner_id:k.id,transaction_id:u,success_url:W};f=await de(B),console.log(f),f.success&&(te(f),f.payment_url&&(window.open(f.payment_url,"_blank"),v.success("Lien de paiement Wave ouvert dans un nouvel onglet",{position:"top-center",autoClose:3e3})))}else c==="orange"&&(f=await r(n,p||"",_,y,d,b==null?void 0:b.id,W),console.log("paymentResponse orange "),console.log(f),f.success&&(te(f),D(f.qrCodeBase),v.success("QR Code Orange Money généré avec succès",{position:"top-center",autoClose:3e3})));f&&f.success&&(ge(!0),c==="orange"&&le(f))}catch(u){console.error("Erreur lors du paiement:",u),console.log(u),v.error(`Erreur lors du paiement: ${u.message}`,{position:"top-center",autoClose:5e3})}},[c,p,w.valid,w.message,j,z,d,n,a,re,ue,r,b==null?void 0:b.id]),be=s.useCallback(async()=>{if(!i){v.error("Aucune transaction à vérifier",{position:"top-center",autoClose:3e3});return}try{let t;if(c==="wave"?(t=await Z(i.transaction_id),console.log(t)):c==="orange"&&(t=await o(i.transactionId),console.log(t),console.log("resultate de la vérfication du paiement OM ")),t){const g=t.status||t.rawStatus;g==="completed"||g==="SUCCESS"?(v.success("Paiement confirmé avec succès!",{position:"top-center",autoClose:3e3}),setTimeout(()=>{m(K()),J(!1)},1500)):g==="failed"||g==="FAILED"?v.error("Le paiement a échoué",{position:"top-center",autoClose:5e3}):v.warning("Le paiement est toujours en attente",{position:"top-center",autoClose:5e3})}}catch(t){console.error("Erreur lors de la vérification du paiement:",t),v.error(`Erreur lors de la vérification: ${t.message}`,{position:"top-center",autoClose:5e3})}},[i,c,Z,o,m,K]),le=s.useCallback(async t=>{if(c!=="orange"||!t)return;V(!0);const g=10,u=5e3;for(let y=1;y<=g;y++)try{await new Promise(f=>setTimeout(f,u));const _=await o(t.transactionId);if(_&&(_.status==="completed"||_.status==="SUCCESS")){v.success("Paiement confirmé automatiquement!",{position:"top-center",autoClose:3e3}),setTimeout(()=>{window.location.reload(),J(!1)},2e3),V(!1);return}if(_&&(_.status==="failed"||_.status==="FAILED")){v.error("Paiement échoué",{position:"top-center",autoClose:5e3}),V(!1);return}}catch(_){console.error(`Erreur surveillance tentative ${y}:`,_)}V(!1),v.warning("Surveillance automatique terminée. Veuillez vérifier manuellement.",{position:"top-center",autoClose:5e3})},[c,o,m,K]),je=s.useCallback(()=>{J(!1),C()},[C]);s.useCallback(()=>{if(i&&i.qrCodeBase){const t=document.createElement("a");t.href=i.qrCodeUrl,t.download=`qr-code-orange-money-${i.transactionId}.png`,t.click()}},[i]),s.useCallback(()=>{i&&i.qrCodeBase&&S(i.qrCodeBase)},[i,S]),s.useCallback(async()=>{if(i&&i.transactionId)try{await M(i.transactionId),v.success("Facture téléchargée avec succès",{position:"top-center",autoClose:3e3})}catch{v.error("Erreur lors du téléchargement de la facture",{position:"top-center",autoClose:3e3})}},[i,M]);const we=s.useMemo(()=>{var t;return a?e.jsxs("div",{className:"my-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-800 text-sm font-medium",children:"Nom de la commande:"}),e.jsx("span",{className:"text-gray-800 text-sm",children:a.name})]})}),e.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-gray-800 text-sm font-medium mb-2",children:"Produits"}),(t=a.order_lines)==null?void 0:t.map((g,u)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsxs("span",{className:"text-gray-700 text-sm",children:[g.product_name," (",g.product_uom_qty,")"]}),e.jsx("span",{className:"text-gray-800 text-sm font-medium",children:X(g.price_total)})]},u))]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-800 font-medium",children:"Total Commande:"}),e.jsx("span",{className:"text-gray-800 font-bold",children:X(Math.ceil(a.amount_total))})]}),a.payment_mode==="echelonne"&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-600 font-medium",children:"Total à payer:"}),e.jsx("span",{className:"text-blue-600 font-bold",children:X(Math.ceil(n))})]})]})]}):null},[a,n]);return e.jsxs(U,{size:"xl",className:"h-auto",show:me,popup:!0,onClose:C,children:[e.jsx(U.Header,{}),e.jsx(U.Body,{children:e.jsx("div",{className:"fixed inset-0 p-4 flex flex-wrap justify-center items-center w-full h-full z-[1000] before:fixed before:inset-0 before:w-full before:h-full before:bg-[rgba(0,0,0,0.5)] overflow-auto font-[sans-serif]",children:e.jsxs("div",{className:"w-full max-w-lg bg-white shadow-lg rounded-lg p-8 relative",children:[e.jsxs("div",{className:"flex items-start border-b border-gray-300 pb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-gray-800 text-xl font-bold",children:["Paiement"," ",(a==null?void 0:a.type_sale)==="order"?"Commande":(a==null?void 0:a.type_sale)==="preorder"?"Pré Commande":"Commande à crédit"," "]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Résumé détaillé de votre commande."})]}),e.jsx(Pe,{onClick:je,className:"cursor-pointer hover:text-red-500 hover:scale-110 duration-300"})]}),a&&e.jsxs(e.Fragment,{children:[we,he?e.jsxs("div",{className:"mt-6",children:[c==="orange"&&i&&i.qrCodeBase&&e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:ce,alt:"Orange Money",className:"h-10 w-auto"})}),e.jsx("div",{className:"bg-white p-4 rounded-lg inline-block mb-4 border-2 border-orange-200 shadow-lg",children:e.jsx("img",{src:i.qrCodeBase||"/placeholder.svg",alt:"QR Code Orange Money",className:"max-w-full h-auto max-h-64"})}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mb-4",children:[!se&&e.jsx(Q,{onClick:()=>le(i),className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:L,children:L?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Surveillance..."]}):"Démarrer surveillance automatique"}),se&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin text-green-600"}),e.jsx("span",{className:"text-green-700 text-sm",children:"Surveillance active..."})]})})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Référence:"})," ",i.transactionId]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Montant:"})," ",X(n)]}),i.existing&&e.jsx("p",{className:"text-blue-600",children:e.jsx("span",{className:"font-medium",children:"Transaction existante récupérée"})})]})]}),c==="wave"&&i&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:ie,alt:"Wave",className:"h-20 w-20"})}),e.jsx("h4",{className:"text-blue-800 font-medium mb-2 text-center",children:"Paiement Wave initié"}),e.jsx("p",{className:"text-blue-700 text-sm text-center mb-3",children:"Le lien de paiement a été ouvert dans un nouvel onglet."}),e.jsxs("div",{className:"text-sm text-blue-600 space-y-1 bg-blue-100 p-3 rounded",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Référence:"})," ",xe]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",i.transactionId]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Téléphone:"})," ",p]})]}),i.checkoutUrl&&e.jsx(Q,{onClick:()=>window.open(i.checkoutUrl,"_blank"),className:"w-full mt-3 bg-blue-500 hover:bg-blue-600 text-white",children:"Rouvrir le lien de paiement"})]}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(Q,{onClick:be,disabled:L,className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg",children:L?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Vérification..."]}):"Vérifier le paiement"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-4",children:[e.jsx("h4",{className:"text-gray-800 font-medium mb-3",children:"Choisissez votre méthode de paiement"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${c==="wave"?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-300 hover:border-blue-300"}`,onClick:()=>ee("wave"),children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:ie,alt:"Wave",className:"h-12 w-auto mb-2"}),e.jsx("p",{className:"text-center font-medium",children:"Wave"}),c==="wave"&&e.jsx(oe,{className:"h-5 w-5 text-blue-500 mt-1"})]})}),e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${c==="orange"?"border-orange-500 bg-orange-50 ring-2 ring-orange-200":"border-gray-300 hover:border-orange-300"}`,onClick:()=>ee("orange"),children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:ce,alt:"Orange Money",className:"h-12 w-auto mb-2"}),e.jsx("p",{className:"text-center font-medium",children:"Orange Money"}),c==="orange"&&e.jsx(oe,{className:"h-5 w-5 text-orange-500 mt-1"})]})})]})]}),c==="wave"&&e.jsxs("div",{className:"mt-4 mb-6",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de téléphone Wave"}),e.jsx("input",{type:"tel",id:"phone",value:p,onChange:t=>ae(t.target.value),placeholder:"77 123 45 67",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${w.valid?"border-green-300 focus:ring-green-500":p?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),p&&e.jsx("p",{className:`text-xs mt-1 ${w.valid?"text-green-600":"text-red-600"}`,children:w.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Entrez votre numéro Wave (format: 77XXXXXXX ou 78XXXXXXX)"})]}),c==="orange"&&e.jsxs("div",{className:"mt-4 mb-6",children:[e.jsx("label",{htmlFor:"phone-orange",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de téléphone Orange Money"}),e.jsx("input",{type:"tel",id:"phone-orange",value:p,onChange:t=>ae(t.target.value),placeholder:"77 123 45 67",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${w.valid?"border-green-300 focus:ring-green-500":p?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-orange-500"}`}),p&&e.jsx("p",{className:`text-xs mt-1 ${w.valid?"text-green-600":"text-red-600"}`,children:w.message}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mt-2",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Ee,{className:"h-4 w-4 text-orange-600 mr-2"}),e.jsx("p",{className:"text-xs text-orange-700 font-medium",children:"QR Code + Numéro requis"})]}),e.jsx("p",{className:"text-xs text-orange-600",children:"Le numéro est requis pour la génération du QR Code Orange Money"})]})]}),(R||Y)&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("p",{className:"text-red-700 text-sm",children:R||Y})]})}),e.jsx("div",{className:"flex items-center gap-4 mt-8",children:e.jsx(Q,{onClick:ve,disabled:L||!c||(c==="wave"||c==="orange")&&(!p||!w.valid),className:"w-full bg-bleu-logo hover:to-bleu-claire text-white font-medium py-3 px-6 rounded-lg transition-all duration-200",children:L?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Traitement en cours..."]}):`Payer ${X(n)}`})})]})]})]})})})]})},Le=({totalAmount:N,order:n,idOrder:C,onClose:l,handlePay:d})=>{const[m,$]=s.useState(null),E=q=>{$(q)},k=()=>{$(null)};return e.jsx("div",{className:"w-full max-w-lg mx-auto bg-white rounded-lg shadow-lg p-6",children:m?m==="paydunya"?e.jsx(_e,{handlePay:d,totalAmount:N,onClose:k,order:n,idOrder:C}):e.jsx(Re,{handlePay:d,totalAmount:N,onClose:k,order:n,idOrder:C}):e.jsx(We,{onSelect:E,onClose:l})})},We=({onSelect:N,onClose:n})=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Choisissez votre méthode de paiement"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all",onClick:()=>N("paydunya"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Paydunya"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Payer avec votre carte bancaire ou autres méthodes Paydunya"})]})]})}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all",onClick:()=>N("mobile"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Mobile Money"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Payer avec Wave ou Orange Money"})]})]})})]}),e.jsx(Q,{onClick:n,outline:!0,className:"w-full",children:"Annuler"})]}),Qe=Le;export{Qe as P};
